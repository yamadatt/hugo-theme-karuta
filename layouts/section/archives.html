{{ define "main" }}
  <section class="archives-page">
    <h1 class="single-title">Archives</h1>
    {{/* Collect all posts and sort by date desc, then group by year */}}
    {{ $all := where .Site.RegularPages "Section" "posts" }}
    {{ $sorted := sort $all "Date" "desc" }}
    {{ $groups := $sorted.GroupByDate "2006" }}
    <div class="timeline">
      {{ range $groups }}
        <div class="tl-year">
          <div class="tl-dot" aria-hidden="true"></div>
          <h2 class="tl-year-label">
            {{ .Key }} <span class="year-count">({{ len .Pages }})</span>
          </h2>
        </div>
        <ul class="tl-list" aria-label="Articles in {{ .Key }}">
          {{ range .Pages }}
            <li class="tl-item">
              <div class="tl-marker" aria-hidden="true"></div>
              <div class="tl-content">
                <time datetime="{{ .Date.Format "2006-01-02" }}"
                  >ðŸ—“ {{ .Date.Format "2006-01-02" }}</time
                >
                <a class="tl-title" href="{{ .RelPermalink }}">{{ .Title }}</a>
              </div>
            </li>
          {{ end }}
        </ul>
      {{ end }}
    </div>
  </section>
{{ end }}
